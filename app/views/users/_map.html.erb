<div id="map-canvas" style="width: 600px; height: 600px">
  <div id="map"></div>
</div>

<script type="text/javascript">
var info = <%= raw @hash.to_json %>
var current = <%= raw @home.to_json %>
var map;
function initMap() {
	console.log(current)
  	map = new google.maps.Map(document.getElementById('map'), {
    zoom: 12,
    center: {lat: current.lat, lng: current.lng}
  });

  setMarkers();
}


function setMarkers() {
  var image = {
    url: 'p.png',
    size: new google.maps.Size(40, 60),
    origin: new google.maps.Point(0, 0),
    anchor: new google.maps.Point(0, 32)
  };
  var shape = {
    coords: [1, 1, 1, 20, 18, 20, 18, 1],
    type: 'poly'
  };


  for (var i = 0; i < info.length; i++) {
    var teacher = info[i];
    var id = teacher.id.toString();
    var marker = new google.maps.Marker({
      position: {lat: teacher.lat, lng: teacher.lng},
      map: map,
      customInfo: id
      // shape: shape,
      // title: teacher[0],
      // zIndex: teacher[3]
    });
    attachSecretMessage(marker, marker['customInfo']);
  }
    
  function attachSecretMessage(marker, secretMessage) {
	  var infowindow = new google.maps.InfoWindow({
	    content: secretMessage
	  });

	  marker.addListener('click', function() {
	  	console.log(infowindow.content)
	    $('.profile').hide();
  		$('#profile'+infowindow.content).show();
	  });
	}
}




</script>


<script async defer
      src="https://maps.googleapis.com/maps/api/js?&key=AIzaSyB8x586LieSovKYlT44UbF2u90hO6Q_KqI&callback=initMap">
</script>


